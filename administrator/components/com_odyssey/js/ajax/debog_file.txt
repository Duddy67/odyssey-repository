
SELECT sa.step_id, ds.dpt_id, ds.date_time, ds.date_time_2, ds.max_passengers, ao.addon_id,ao.id AS addon_option_id,ao.ordering AS addon_option_ordering, ao.name AS addon_option_name, op.psgr_nb, op.price
FROM #__odyssey_step_addon_map AS sa
INNER JOIN #__odyssey_addon_option AS ao ON ao.addon_id=sa.addon_id
LEFT JOIN #__odyssey_step AS s1 ON s1.id=6
LEFT JOIN #__odyssey_step AS s2 ON s2.group_alias=s1.group_alias
LEFT JOIN #__odyssey_departure_step_map AS ds ON ds.step_id=s1.id
LEFT JOIN #__odyssey_addon_option_price AS op ON op.travel_id=2 AND op.step_id=sa.step_id AND op.dpt_id=ds.dpt_id AND op.addon_option_id=ao.id
WHERE sa.dpt_id=ds.dpt_id AND sa.step_id=s2.id AND s2.published=1 AND ao.published=1
ORDER BY sa.step_id, ao.ordering, ao.addon_id, ao.id, ds.date_time, op.psgr_nb